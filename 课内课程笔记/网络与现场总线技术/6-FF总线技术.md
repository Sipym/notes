# 第六章 FF总线技术

### 6.1.2 FF总线通信模型
**用户层**  
**应用层**: 又分为`现场总线报文规范子层`，`现场总线访问子层`  
**数据链路层**  
**物理层**  

---
### 6.1.3 协议数据的构成与层次
:star:**用户将数据通过现场总线<font color=purple>发往其他设备所经过的过程</font>**:  
1. >先在`用户层`形成用户数据  
2. >然后送至`总线报文规范层`,`每帧`最多可发送<font color=green>251字节</font>的用户数据信息  
3. >然后依次送往`现场总线访问子层`和`数据链路层`  
4. >:bulb: 用户数据信息在`现场总线访问子层`，`总线报文规范层`，`数据链路层`分别<font color=green>加上各层的协议控制信息</font>，在`数据链路层`还要加上<font color=green>帧校验信息</font>。  
5. >最后送往`物理层`将数据打包,即通过物理层转换为<font color=green>符合规范的物理信号</font>，在网络系统的管理控制下，发送到`现场总线网段`  


---

### 6.2.5 FF总线的拓扑结构
**类型**: `点到点结构`，`带分支的总线结构`，`菊花链结构`，`树状结构`  
![img](img/FF总线的拓扑结构.png '图1 FF总线的拓扑结构. :size=60%')  


## 6.3 数据链路层

### 6.3.1 通信设备类型
>三大类别:链路主设备，基本设备，网桥  


**链路主设备**: 有能力成为<font color=green>链路活动调度器</font>的设备   
**基本设备**: 只能接受令牌并做出响应  
**网桥**: 网络中几个总线段进行扩展连接时，<font color=green>用于两个总线段之间的连接设备</font>就叫网桥 
   - > :bulb:<font color=red>网桥属于链路主设备</font>  

---
### 6.3.3 受调度通信和非调度通信
**受调度通信**: 当到达`链路活动调度器`中时刻表的某一时刻时，向设备强制发出一个强制数据,...  

**非调度通信**: 现场总线上所有设备都有机会在`调度报文传送之间`发送`非调度报文`  


![img](img/调度数据传输示意图.png '图2 调度数据传输示意图 :size=50%')  

## 6.7.1 通信实体
**通信实体**包含自`物理层`、`数据链路层`、`现场总线访问子层`和`现场总线报文规范层`直至`用户层`  
**设备的通信实体**由各层的协议和网络管理代理共同组成,<font color=red>通信栈是其中的核心</font>  

