# riscv的函数调用约定
## 函数调用过程
1. 将`参数`存储到函数能够访问到的位置  
2. `跳转`到函数开始位置(使用jal指令)  
3. `获取`函数需要的`局部存储资源`，按需保存寄存器  
4. `执行`函数中的指令  
5. 将`返回值`存储到调用者能访问到的位置，`恢复寄存器`，`释放局部`存储资源  
6. `返回`调用函数的位置  

---
变量尽量`存放在寄存器`而不是内存中.避免频繁的保存和恢复寄存器  
   - > 当函数参数和局部变量很多时，程序需要把寄存器的值保存在内存中  

**叶函数**: <font color=green>不再调用其他函数</font>的函数  

## 寄存器规范
**临时寄存器**: 用来存储<font color=purple>值会改变</font>的变量，在<font color=purple>函数调用中不保留</font>  
**保存寄存器**: 其保存的数据，在<font color=red>函数调用前后值<u>不变</u></font>  

![img](img/函数调用中寄存器相关约定.png '图1 函数调用中寄存器相关约定 :size=80%')  
